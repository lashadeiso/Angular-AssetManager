"use strict";(self.webpackChunkassets_app=self.webpackChunkassets_app||[]).push([[771],{9771:(A,d,i)=>{i.r(d),i.d(d,{SingleUserModule:()=>j});var m=i(6814),p=i(8525),a=i(6223),c=i(1896),C=i(4825),_=i(3519),g=i.n(_),e=i(5879),M=i(8065),v=i(1954),b=i(8372),h=i(9157),U=i(3680),f=i(2032);function S(t,r){if(1&t&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n," ")}}function O(t,r){if(1&t&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n," ")}}function P(t,r){if(1&t&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n," ")}}function T(t,r){if(1&t&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n," ")}}const Z=[{path:"",component:(()=>{class t{constructor(n,o,u,l,s){this._tokenDecoderValidatorService=n,this._actvieRoute=o,this._http=u,this._router=l,this._selectBoxHttpService=s,this.singleUser={id:"",email:"",fullName:"",role:"",site:"",project:"",isActive:!0,createdAt:""},this.statusesDropDown=[!0,!1],this.jwtToken=this._tokenDecoderValidatorService.isToken(),this.userEmail=this._actvieRoute.snapshot.queryParamMap.get("email")}ngOnInit(){this.getSingleUser()}getSingleUser(){""!=this.jwtToken&&this.userEmail&&this._http.getSingleUser(this.jwtToken,this.userEmail).subscribe(n=>{200===n.statusCode&&(this.singleUser=n.content,this.getRoleAndSite())},n=>{g().fire({icon:"error",title:"Oops...",text:n.error.message})})}onFormSubmit(n){""!=this.jwtToken&&this.userEmail&&this._http.updateUserProfile(this.jwtToken,this.userEmail,n.value).subscribe(o=>{200===o.statusCode&&(g().fire({position:"center",icon:"success",title:"User has been updated",showConfirmButton:!1,timer:1500}),(0,C.H)(1500).subscribe(()=>{this._router.navigate(["/main/users/all-user"])}))},o=>{g().fire({icon:"error",title:"Oops...",text:o.error.message})})}onResetPassword(){this._router.navigate(["main/users/reset-password"],{queryParams:{email:this.userEmail}})}getRoleAndSite(){""!=this.jwtToken&&this._selectBoxHttpService.getRoleAndSiteSelectBox(this.jwtToken).subscribe(n=>{200===n.statusCode&&(this.rolesDropDown=n.content.role,this.sitesDropDown=n.content.site,this.getProject(this.singleUser.site))},n=>{g().fire({icon:"error",title:"Oops...",text:n.error.message})})}getProject(n){""!=this.jwtToken&&this._selectBoxHttpService.getProjectSelectBox(this.jwtToken,n).subscribe(o=>{200===o.statusCode&&(this.projectsDropDowns=o.content.project)},o=>{g().fire({icon:"error",title:"Oops...",text:o.error.message})})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(M.a),e.Y36(c.gz),e.Y36(v.b),e.Y36(c.F0),e.Y36(b.I))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-single-user"]],decls:42,vars:11,consts:[[1,"single-user-container"],[1,"single-user-header"],[1,"single-user-reset-btn",3,"click"],[1,"single-user-content"],[1,"single-user-title"],[1,"single-user-body"],[1,"single-user-form",3,"ngSubmit"],["singleUserEditForm","ngForm"],[1,"single-user-inputs"],[1,"single-user-fullName"],["matInput","","name","fullName","required","",3,"ngModel","ngModelChange"],[1,"single-user-email"],["matInput","","name","email","required","",3,"ngModel","ngModelChange"],[1,"single-user-status"],["name","isActive","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"single-user-role"],["name","role","required","",3,"ngModel","ngModelChange"],[1,"single-user-site"],["name","site","required","",3,"ngModel","ngModelChange","selectionChange"],[1,"single-user-project"],["name","project","required","",3,"ngModel","ngModelChange"],[1,"single-user-btn"],["type","submit",3,"disabled"],[3,"value"]],template:function(n,o){if(1&n){const u=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return o.onResetPassword()}),e._uU(3," Reset Password "),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4),e._uU(6,"Edit User"),e.qZA(),e.TgZ(7,"div",5)(8,"form",6,7),e.NdJ("ngSubmit",function(){e.CHM(u);const s=e.MAs(9);return e.KtG(o.onFormSubmit(s))}),e.TgZ(10,"div",8)(11,"mat-form-field",9)(12,"mat-label"),e._uU(13,"Full Name"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("ngModelChange",function(s){return o.singleUser.fullName=s}),e.qZA()(),e.TgZ(15,"mat-form-field",11)(16,"mat-label"),e._uU(17,"E-mail"),e.qZA(),e.TgZ(18,"input",12),e.NdJ("ngModelChange",function(s){return o.singleUser.email=s}),e.qZA()(),e.TgZ(19,"mat-form-field",13)(20,"mat-label"),e._uU(21,"Status"),e.qZA(),e.TgZ(22,"mat-select",14),e.NdJ("ngModelChange",function(s){return o.singleUser.isActive=s}),e.YNc(23,S,2,2,"mat-option",15),e.qZA()(),e.TgZ(24,"mat-form-field",16)(25,"mat-label"),e._uU(26,"Role"),e.qZA(),e.TgZ(27,"mat-select",17),e.NdJ("ngModelChange",function(s){return o.singleUser.role=s}),e.YNc(28,O,2,2,"mat-option",15),e.qZA()(),e.TgZ(29,"mat-form-field",18)(30,"mat-label"),e._uU(31,"Site"),e.qZA(),e.TgZ(32,"mat-select",19),e.NdJ("ngModelChange",function(s){return o.singleUser.site=s})("selectionChange",function(s){return o.getProject(s.value)}),e.YNc(33,P,2,2,"mat-option",15),e.qZA()(),e.TgZ(34,"mat-form-field",20)(35,"mat-label"),e._uU(36,"Project"),e.qZA(),e.TgZ(37,"mat-select",21),e.NdJ("ngModelChange",function(s){return o.singleUser.project=s}),e.YNc(38,T,2,2,"mat-option",15),e.qZA()(),e.TgZ(39,"div",22)(40,"button",23),e._uU(41," Submit "),e.qZA()()()()()()()}if(2&n){const u=e.MAs(9);e.xp6(14),e.Q6J("ngModel",o.singleUser.fullName),e.xp6(4),e.Q6J("ngModel",o.singleUser.email),e.xp6(4),e.Q6J("ngModel",o.singleUser.isActive),e.xp6(1),e.Q6J("ngForOf",o.statusesDropDown),e.xp6(4),e.Q6J("ngModel",o.singleUser.role),e.xp6(1),e.Q6J("ngForOf",o.rolesDropDown),e.xp6(4),e.Q6J("ngModel",o.singleUser.site),e.xp6(1),e.Q6J("ngForOf",o.sitesDropDown),e.xp6(4),e.Q6J("ngModel",o.singleUser.project),e.xp6(1),e.Q6J("ngForOf",o.projectsDropDowns),e.xp6(2),e.Q6J("disabled",!u.valid)}},dependencies:[m.sg,h.KE,h.hX,p.gD,U.ey,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F,f.Nt],styles:[".single-user-container[_ngcontent-%COMP%]{width:100%;height:100%}.single-user-container[_ngcontent-%COMP%]   .single-user-header[_ngcontent-%COMP%]{width:100%;height:60px;display:flex;align-items:center;background-color:var(--backGround);border-bottom:4px solid var(--gold)}.single-user-container[_ngcontent-%COMP%]   .single-user-header[_ngcontent-%COMP%]   .single-user-reset-btn[_ngcontent-%COMP%]{margin-left:20px;height:35px;width:120px;border:2px solid var(--gold);border-radius:10px;font-size:12px;cursor:pointer;color:var(--white);background-color:var(--MoreDarkBlue)}.single-user-container[_ngcontent-%COMP%]   .single-user-header[_ngcontent-%COMP%]   .single-user-reset-btn[_ngcontent-%COMP%]:hover{background-color:var(--darkBlue);transition:all .3s}.single-user-container[_ngcontent-%COMP%]   .single-user-header[_ngcontent-%COMP%]   .single-user-reset-btn[_ngcontent-%COMP%]:disabled{background-color:var(--darkGray)}.single-user-container[_ngcontent-%COMP%]   .single-user-content[_ngcontent-%COMP%]{position:relative;margin:50px auto;padding:2% 5%;height:1000px;width:600px;background-color:var(--backGround);border:3px solid var(--gold);box-sizing:border-box;border-radius:10px}.single-user-container[_ngcontent-%COMP%]   .single-user-content[_ngcontent-%COMP%]   .single-user-title[_ngcontent-%COMP%]{margin:0 auto;width:80%;height:20px;border-bottom:2px solid var(--darkWhite)!important;color:var(--darkWhite);font-size:20px;display:flex;justify-content:space-around}.single-user-container[_ngcontent-%COMP%]   .single-user-inputs[_ngcontent-%COMP%]{height:150px;margin-top:50px;display:flex;flex-direction:column;justify-content:space-between}.single-user-container[_ngcontent-%COMP%]   .single-user-inputs[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{color:var(--white)}.single-user-container[_ngcontent-%COMP%]   .single-user-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:var(--white)}.single-user-container[_ngcontent-%COMP%]   .single-user-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;transform:translate(-50%,-50%);height:50px;width:200px;border:none;font-weight:500;border-radius:5px;font-size:18px;cursor:pointer;color:var(--white);background-color:var(--darkBlue);border:2px solid var(--gold)}.single-user-container[_ngcontent-%COMP%]   .single-user-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--MoreDarkBlue);transition:all .3s}.single-user-container[_ngcontent-%COMP%]   .single-user-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{border:none;background-color:var(--darkGray);cursor:auto}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.Bz.forChild(Z),c.Bz]}),t})(),j=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,p.LD,a.u5,f.c,x]}),t})()}}]);